This was the original Bash version
It was very basic, not very scalable, and a bit error prone.
